<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>ScopedValue (Java SE 21 &amp; JDK 21 [ad-hoc build])</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: jdk.incubator.concurrent, package: jdk.incubator.concurrent, class: ScopedValue">
<meta name="generator" content="javadoc/ClassWriterImpl">
<meta name="keywords" content="jdk.incubator.concurrent.ScopedValue class">
<meta name="keywords" content="hashCode()">
<meta name="keywords" content="where()">
<meta name="keywords" content="newInstance()">
<meta name="keywords" content="get()">
<meta name="keywords" content="isBound()">
<meta name="keywords" content="orElse()">
<meta name="keywords" content="orElseThrow()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header"><div style="padding: 6px; text-align: center; font-size: 80%; font-family: DejaVu Sans, Arial, Helvetica, sans-serif; font-weight: normal;">This specification is not final and is subject to change. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java21speclicense.html">license terms</a>.</div>
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 9px;"><strong>Java SE 21 &amp; JDK 21</strong> <br><strong>DRAFT 21-internal-adhoc.jlaskey.open</strong></div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ScopedValue.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">jdk.incubator.concurrent</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jdk.incubator.concurrent</a></div>
<h1 title="Class ScopedValue" class="title">Class ScopedValue&lt;T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="../../../../java.base/java/lang/Object.html" title="class in java.lang">java.lang.Object</a>
<div class="inheritance">jdk.incubator.concurrent.ScopedValue&lt;T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of the object bound to this <code>ScopedValue</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">ScopedValue&lt;T&gt;</span>
<span class="extends-implements">extends <a href="../../../../java.base/java/lang/Object.html" title="class in java.lang">Object</a></span></div>
<div class="block">A value that is set once and is then available for reading for a bounded period of
 execution by a thread. A <code>ScopedValue</code> allows for safely and efficiently sharing
 data for a bounded period of execution without passing the data as method arguments.

 <p> <code>ScopedValue</code> defines the <a href="#where(jdk.incubator.concurrent.ScopedValue,T,java.lang.Runnable)"><code>where(ScopedValue, Object, Runnable)</code></a>
 method to set the value of a <code>ScopedValue</code> for the bouned period of execution by
 a thread of the runnable's <a href="../../../../java.base/java/lang/Runnable.html#run()"><code>run</code></a> method. The unfolding execution of
 the methods executed by <code>run</code> defines a <b><em>dynamic scope</em></b>. The scoped
 value is <a href="#isBound()">bound</a> while executing in the dynamic scope, it reverts
 to being <em>unbound</em> when the <code>run</code> method completes (normally or with an
 exception). Code executing in the dynamic scope uses the <code>ScopedValue</code> <a href="#get()"><code>get</code></a> method to read its value.

 <p> Like a <a href="../../../../java.base/java/lang/ThreadLocal.html" title="class in java.lang">thread-local variable</a>, a scoped value has multiple
 incarnations, one per thread. The particular incarnation that is used depends on which
 thread calls its methods.

 <p> Consider the following example with a scoped value <code>USERNAME</code> that is
 <em>bound</em> to the value "<code>duke</code>" for the execution, by a thread, of a run
 method that invokes <code>doSomething()</code>.
 
<div class="snippet-container"><button class="copy snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">    private static final ScopedValue&lt;String&gt; USERNAME = ScopedValue.<a href="#newInstance()"><code>newInstance</code></a>();

    ScopedValue.where(USERNAME, "duke", () -&gt; doSomething());
</code></pre>
</div>

 Code executed directly or indirectly by <code>doSomething()</code> that invokes <code>
 USERNAME.get()</code> will read the value "<code>duke</code>". The scoped value is bound while
 executing <code>doSomething()</code> and becomes unbound when <code>doSomething()</code>
 completes (normally or with an exception). If one thread were to call <code>
 doSomething()</code> with <code>USERNAME</code> bound to "<code>duke1</code>", and another thread
 were to call the method with <code>USERNAME</code> bound to "<code>duke2</code>", then
 <code>USERNAME.get()</code> would read the value "<code>duke1</code>" or "<code>duke2</code>",
 depending on which thread is executing.

 <p> In addition to the <code>where</code> method that executes a <code>run</code> method, <code>
 ScopedValue</code> defines the <a href="#where(jdk.incubator.concurrent.ScopedValue,T,java.util.concurrent.Callable)"><code>where(ScopedValue, Object, Callable)</code></a> method to execute
 a method that returns a result. It also defines the <a href="#where(jdk.incubator.concurrent.ScopedValue,T)"><code>where(ScopedValue, Object)</code></a>
 method for cases where it is useful to accumulate mappings of <code>ScopedValue</code> to
 value.

 <p> A <code>ScopedValue</code> will typically be declared in a <code>final</code> and <code>
 static</code> field. The accessibility of the field will determine which components can
 bind or read its value.

 <p> Unless otherwise specified, passing a <code>null</code> argument to a method in this
 class will cause a <a href="../../../../java.base/java/lang/NullPointerException.html" title="class in java.lang"><code>NullPointerException</code></a> to be thrown.

 <h2><a id="rebind">Rebinding</a></h2>

 The <code>ScopedValue</code> API allows a new binding to be established for <em>nested
 dynamic scopes</em>. This is known as <em>rebinding</em>. A <code>ScopedValue</code> that
 is bound to some value may be bound to a new value for the bounded execution of some
 method. The unfolding execution of code executed by that method defines the nested
 dynamic scope. When the method completes (normally or with an exception), the value of
 the <code>ScopedValue</code> reverts to its previous value.

 <p> In the above example, suppose that code executed by <code>doSomething()</code> binds
 <code>USERNAME</code> to a new value with:
 
<div class="snippet-container"><button class="copy snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">    ScopedValue.where(USERNAME, "duchess", () -&gt; doMore());
</code></pre>
</div>

 Code executed directly or indirectly by <code>doMore()</code> that invokes <code>
 USERNAME.get()</code> will read the value "<code>duchess</code>". When <code>doMore()</code> completes
 (normally or with an exception), the value of <code>USERNAME</code> reverts to
 "<code>duke</code>".

 <h2><a id="inheritance">Inheritance</a></h2>

 <code>ScopedValue</code> supports sharing data across threads. This sharing is limited to
 structured cases where child threads are started and terminate within the bounded
 period of execution by a parent thread. More specifically, when using a <a href="StructuredTaskScope.html" title="class in jdk.incubator.concurrent"><code>StructuredTaskScope</code></a>, scoped value bindings are <em>captured</em> when creating a
 <code>StructuredTaskScope</code> and inherited by all threads started in that scope with
 the <a href="StructuredTaskScope.html#fork(java.util.concurrent.Callable)"><code>fork</code></a> method.

 <p> In the following example, the <code>ScopedValue</code> <code>USERNAME</code> is bound to the
 value "<code>duke</code>" for the execution of a runnable operation. The code in the <code>
 run</code> method creates a <code>StructuredTaskScope</code> and forks three child threads. Code
 executed directly or indirectly by these threads running <code>childTask1()</code>,
 <code>childTask2()</code>, and <code>childTask3()</code> will read the value "<code>duke</code>".

 
<div class="snippet-container"><button class="copy snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">    private static final ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();

    ScopedValue.where(USERNAME, "duke", () -&gt; {
        try (var scope = new StructuredTaskScope&lt;String&gt;()) {

            scope.fork(() -&gt; childTask1());
            scope.fork(() -&gt; childTask2());
            scope.fork(() -&gt; childTask3());

            ...
         }
    });
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Implementation Note:</dt>
<dd>Scoped values are designed to be used in fairly small
 numbers. <a href="#get()"><code>get()</code></a> initially performs a search through enclosing
 scopes to find a scoped value's innermost binding. It
 then caches the result of the search in a small thread-local
 cache. Subsequent invocations of <a href="#get()"><code>get()</code></a> for that scoped value
 will almost always be very fast. However, if a program has many
 scoped values that it uses cyclically, the cache hit rate
 will be low and performance will be poor. This design allows
 scoped-value inheritance by <a href="StructuredTaskScope.html" title="class in jdk.incubator.concurrent"><code>StructuredTaskScope</code></a> threads to
 be very fast: in essence, no more than copying a pointer, and
 leaving a scoped-value binding also requires little more than
 updating a pointer.

 <p>Because the scoped-value per-thread cache is small, clients
 should minimize the number of bound scoped values in use. For
 example, if it is necessary to pass a number of values in this way,
 it makes sense to create a record class to hold those values, and
 then bind a single <code>ScopedValue</code> to an instance of that record.

 <p>For this incubator release, the reference implementation
 provides some system properties to tune the performance of scoped
 values.

 <p>The system property <code>jdk.incubator.concurrent.ScopedValue.cacheSize</code>
 controls the size of the (per-thread) scoped-value cache. This cache is crucial
 for the performance of scoped values. If it is too small,
 the runtime library will repeatedly need to scan for each
 <a href="#get()"><code>get()</code></a>. If it is too large, memory will be unnecessarily
 consumed. The default scoped-value cache size is 16 entries. It may
 be varied from 2 to 16 entries in size. <code>ScopedValue.cacheSize</code>
 must be an integer power of 2.

 <p>For example, you could use <code>-Djdk.incubator.concurrent.ScopedValue.cacheSize=8</code>.

 <p>The other system property is <code>jdk.preserveScopedValueCache</code>.
 This property determines whether the per-thread scoped-value
 cache is preserved when a virtual thread is blocked. By default
 this property is set to <code>true</code>, meaning that every virtual
 thread preserves its scoped-value cache when blocked. Like <code>
 ScopedValue.cacheSize</code>, this is a space versus speed trade-off: in
 situations where many virtual threads are blocked most of the time,
 setting this property to <code>false</code> might result in a useful
 memory saving, but each virtual thread's scoped-value cache would
 have to be regenerated after a blocking operation.</dd>
<dt>Since:</dt>
<dd>20</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ScopedValue.Carrier.html" class="type-name-link" title="class in jdk.incubator.concurrent">ScopedValue.Carrier</a></code></div>
<div class="col-last even-row-color">
<div class="block">A mapping of scoped values, as <em>keys</em>, to values.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScopedValue.html" title="type parameter in ScopedValue">T</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#get()" class="member-name-link">get</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the value of the scoped value if bound in the current thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isBound()" class="member-name-link">isBound</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns <code>true</code> if this scoped value is bound in the current thread.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#newInstance()" class="member-name-link">newInstance</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates a scoped value that is initially unbound for all threads.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScopedValue.html" title="type parameter in ScopedValue">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#orElse(T)" class="member-name-link">orElse</a><wbr>(<a href="ScopedValue.html" title="type parameter in ScopedValue">T</a>&nbsp;other)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the value of this scoped value if bound in the current thread, otherwise
 returns <code>other</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>&lt;X extends <a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang">Throwable</a>&gt;<br><a href="ScopedValue.html" title="type parameter in ScopedValue">T</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#orElseThrow(java.util.function.Supplier)" class="member-name-link">orElseThrow</a><wbr>(<a href="../../../../java.base/java/util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends X&gt;&nbsp;exceptionSupplier)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the value of this scoped value if bound in the current thread, otherwise
 throws an exception produced by the exception supplying function.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="ScopedValue.Carrier.html" title="class in jdk.incubator.concurrent">ScopedValue.Carrier</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#where(jdk.incubator.concurrent.ScopedValue,T)" class="member-name-link">where</a><wbr>(<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;&nbsp;key,
 T&nbsp;value)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates a new <code>Carrier</code> with a single mapping of a <code>ScopedValue</code>
 <em>key</em> to a value.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#where(jdk.incubator.concurrent.ScopedValue,T,java.lang.Runnable)" class="member-name-link">where</a><wbr>(<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;&nbsp;key,
 T&nbsp;value,
 <a href="../../../../java.base/java/lang/Runnable.html" title="interface in java.lang">Runnable</a>&nbsp;op)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Run an operation with a <code>ScopedValue</code> bound to a value in the current
 thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
R&gt;&nbsp;R</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#where(jdk.incubator.concurrent.ScopedValue,T,java.util.concurrent.Callable)" class="member-name-link">where</a><wbr>(<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;&nbsp;key,
 T&nbsp;value,
 <a href="../../../../java.base/java/util/concurrent/Callable.html" title="interface in java.util.concurrent">Callable</a>&lt;? extends R&gt;&nbsp;op)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Calls a value-returning operation with a <code>ScopedValue</code> bound to a value
 in the current thread.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class&nbsp;java.lang.<a href="../../../../java.base/java/lang/Object.html" title="class in java.lang">Object</a></h3>
<code><a href="../../../../java.base/java/lang/Object.html#clone()">clone</a>, <a href="../../../../java.base/java/lang/Object.html#equals(java.lang.Object)">equals</a>, <a href="../../../../java.base/java/lang/Object.html#finalize()">finalize</a>, <a href="../../../../java.base/java/lang/Object.html#getClass()">getClass</a>, <a href="../../../../java.base/java/lang/Object.html#hashCode()">hashCode</a>, <a href="../../../../java.base/java/lang/Object.html#notify()">notify</a>, <a href="../../../../java.base/java/lang/Object.html#notifyAll()">notifyAll</a>, <a href="../../../../java.base/java/lang/Object.html#toString()">toString</a>, <a href="../../../../java.base/java/lang/Object.html#wait()">wait</a>, <a href="../../../../java.base/java/lang/Object.html#wait(long)">wait</a>, <a href="../../../../java.base/java/lang/Object.html#wait(long,int)">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="where(jdk.incubator.concurrent.ScopedValue,T)">
<h3 id="where(jdk.incubator.concurrent.ScopedValue,java.lang.Object)">where</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="ScopedValue.Carrier.html" title="class in jdk.incubator.concurrent">ScopedValue.Carrier</a></span>&nbsp;<span class="element-name">where</span><wbr><span class="parameters">(<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;&nbsp;key,
 T&nbsp;value)</span></div>
<div class="block">Creates a new <code>Carrier</code> with a single mapping of a <code>ScopedValue</code>
 <em>key</em> to a value. The <code>Carrier</code> can be used to accumlate mappings so
 that an operation can be executed with all scoped values in the mapping bound to
 values. The following example runs an operation with <code>k1</code> bound (or rebound)
 to <code>v1</code>, and <code>k2</code> bound (or rebound) to <code>v2</code>.
 
<div class="snippet-container"><button class="copy snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">    ScopedValue.where(k1, v1).where(k2, v2).<a href="ScopedValue.Carrier.html#run(java.lang.Runnable)"><code>run</code></a>(() -&gt; ... );
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of the value</dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the <code>ScopedValue</code> key</dd>
<dd><code>value</code> - the value, can be <code>null</code></dd>
<dt>Returns:</dt>
<dd>a new <code>Carrier</code> with a single mapping</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="where(jdk.incubator.concurrent.ScopedValue,T,java.util.concurrent.Callable)">
<h3 id="where(jdk.incubator.concurrent.ScopedValue,java.lang.Object,java.util.concurrent.Callable)">where</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
R&gt;</span>&nbsp;<span class="return-type">R</span>&nbsp;<span class="element-name">where</span><wbr><span class="parameters">(<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;&nbsp;key,
 T&nbsp;value,
 <a href="../../../../java.base/java/util/concurrent/Callable.html" title="interface in java.util.concurrent">Callable</a>&lt;? extends R&gt;&nbsp;op)</span>
                      throws <span class="exceptions"><a href="../../../../java.base/java/lang/Exception.html" title="class in java.lang">Exception</a></span></div>
<div class="block">Calls a value-returning operation with a <code>ScopedValue</code> bound to a value
 in the current thread. When the operation completes (normally or with an
 exception), the <code>ScopedValue</code> will revert to being unbound, or revert to
 its previous value when previously bound, in the current thread.

 <p> Scoped values are intended to be used in a <em>structured manner</em>.
 If <code>op</code> creates a <a href="StructuredTaskScope.html" title="class in jdk.incubator.concurrent"><code>StructuredTaskScope</code></a> but does not <a href="StructuredTaskScope.html#close()">close</a> it, then exiting <code>op</code> causes the
 underlying construct of each <code>StructuredTaskScope</code> created in the
 dynamic scope to be closed. This may require blocking until all child threads
 have completed their sub-tasks. The closing is done in the reverse order that
 they were created. Once closed, <a href="StructureViolationException.html" title="class in jdk.incubator.concurrent"><code>StructureViolationException</code></a> is thrown.</div>
<dl class="notes">
<dt>Implementation Note:</dt>
<dd>This method is implemented to be equivalent to:
 
<div class="snippet-container"><button class="copy snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">    ScopedValue.where(key, value).<a href="ScopedValue.Carrier.html#call(java.util.concurrent.Callable)"><code>call</code></a>(op);
</code></pre>
</div>
</dd>
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of the value</dd>
<dd><code>R</code> - the result type</dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the <code>ScopedValue</code> key</dd>
<dd><code>value</code> - the value, can be <code>null</code></dd>
<dd><code>op</code> - the operation to call</dd>
<dt>Returns:</dt>
<dd>the result</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/Exception.html" title="class in java.lang">Exception</a></code> - if the operation completes with an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="where(jdk.incubator.concurrent.ScopedValue,T,java.lang.Runnable)">
<h3 id="where(jdk.incubator.concurrent.ScopedValue,java.lang.Object,java.lang.Runnable)">where</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">where</span><wbr><span class="parameters">(<a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;&nbsp;key,
 T&nbsp;value,
 <a href="../../../../java.base/java/lang/Runnable.html" title="interface in java.lang">Runnable</a>&nbsp;op)</span></div>
<div class="block">Run an operation with a <code>ScopedValue</code> bound to a value in the current
 thread. When the operation completes (normally or with an exception), the
 <code>ScopedValue</code> will revert to being unbound, or revert to its previous value
 when previously bound, in the current thread.

 <p> Scoped values are intended to be used in a <em>structured manner</em>.
 If <code>op</code> creates a <a href="StructuredTaskScope.html" title="class in jdk.incubator.concurrent"><code>StructuredTaskScope</code></a> but does not <a href="StructuredTaskScope.html#close()">close</a> it, then exiting <code>op</code> causes the
 underlying construct of each <code>StructuredTaskScope</code> created in the
 dynamic scope to be closed. This may require blocking until all child threads
 have completed their sub-tasks. The closing is done in the reverse order that
 they were created. Once closed, <a href="StructureViolationException.html" title="class in jdk.incubator.concurrent"><code>StructureViolationException</code></a> is thrown.</div>
<dl class="notes">
<dt>Implementation Note:</dt>
<dd>This method is implemented to be equivalent to:
 
<div class="snippet-container"><button class="copy snippet-copy" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy"></button>
<pre class="snippet"><code class="language-java">    ScopedValue.where(key, value).<a href="ScopedValue.Carrier.html#run(java.lang.Runnable)"><code>run</code></a>(op);
</code></pre>
</div>
</dd>
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of the value</dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the <code>ScopedValue</code> key</dd>
<dd><code>value</code> - the value, can be <code>null</code></dd>
<dd><code>op</code> - the operation to call</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newInstance()">
<h3>newInstance</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="ScopedValue.html" title="class in jdk.incubator.concurrent">ScopedValue</a>&lt;T&gt;</span>&nbsp;<span class="element-name">newInstance</span>()</div>
<div class="block">Creates a scoped value that is initially unbound for all threads.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of the value</dd>
<dt>Returns:</dt>
<dd>a new <code>ScopedValue</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="get()">
<h3>get</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScopedValue.html" title="type parameter in ScopedValue">T</a></span>&nbsp;<span class="element-name">get</span>()</div>
<div class="block">Returns the value of the scoped value if bound in the current thread.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the value of the scoped value if bound in the current thread</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/util/NoSuchElementException.html" title="class in java.util">NoSuchElementException</a></code> - if the scoped value is not bound</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isBound()">
<h3>isBound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isBound</span>()</div>
<div class="block">Returns <code>true</code> if this scoped value is bound in the current thread.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if this scoped value is bound in the current thread</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="orElse(T)">
<h3 id="orElse(java.lang.Object)">orElse</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScopedValue.html" title="type parameter in ScopedValue">T</a></span>&nbsp;<span class="element-name">orElse</span><wbr><span class="parameters">(<a href="ScopedValue.html" title="type parameter in ScopedValue">T</a>&nbsp;other)</span></div>
<div class="block">Returns the value of this scoped value if bound in the current thread, otherwise
 returns <code>other</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>other</code> - the value to return if not bound, can be <code>null</code></dd>
<dt>Returns:</dt>
<dd>the value of the scoped value if bound, otherwise <code>other</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="orElseThrow(java.util.function.Supplier)">
<h3>orElseThrow</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="type-parameters">&lt;X extends <a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang">Throwable</a>&gt;</span>&nbsp;<span class="return-type"><a href="ScopedValue.html" title="type parameter in ScopedValue">T</a></span>&nbsp;<span class="element-name">orElseThrow</span><wbr><span class="parameters">(<a href="../../../../java.base/java/util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends X&gt;&nbsp;exceptionSupplier)</span>
                                    throws <span class="exceptions">X</span></div>
<div class="block">Returns the value of this scoped value if bound in the current thread, otherwise
 throws an exception produced by the exception supplying function.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>X</code> - the type of the exception that may be thrown</dd>
<dt>Parameters:</dt>
<dd><code>exceptionSupplier</code> - the supplying function that produces the exception to throw</dd>
<dt>Returns:</dt>
<dd>the value of the scoped value if bound in the current thread</dd>
<dt>Throws:</dt>
<dd><code>X</code> - if the scoped value is not bound in the current thread</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase21&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2022, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java21speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <br><strong>DRAFT 21-internal-adhoc.jlaskey.open</strong> <!-- Version 21-internal-adhoc.jlaskey.open --></small></p>
</footer>
</div>
</div>
</body>
</html>
